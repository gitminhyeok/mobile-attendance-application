{% extends "base.html" %}

{% block title %}Magnus - ë‚´ ê¸°ë¡{% endblock %}

{% block content %}
<div class="w-full max-w-md p-4">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">ğŸ“… ë‚´ ì¶œì„ ê¸°ë¡</h1>

    <!-- Summary Card -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-8 text-center">
        <h2 class="text-gray-500 text-sm mb-2">{{ current_month }}ì›” ì¶œì„ë¥ </h2>
        <div class="relative w-32 h-32 mx-auto flex items-center justify-center">
             <!-- Circular Progress Placeholder -->
            <svg class="w-full h-full" viewBox="0 0 36 36">
                <path class="text-gray-200" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="4" />
                <path class="text-blue-500" stroke-dasharray="{{ attendance_rate }}, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="4" />
            </svg>
            <span class="absolute text-3xl font-bold text-blue-600">{{ attendance_rate }}%</span>
        </div>
        <p class="mt-4 text-sm text-gray-500">
            ì´ <span class="font-bold text-gray-800">{{ valid_days_count }}</span>ì¼ ì¤‘ 
            <span class="font-bold text-blue-600">{{ attendance_list|length }}</span>ì¼ ì¶œì„
        </p>
    </div>

    <!-- Attendance List -->
    <div class="space-y-4">
        <h3 class="text-lg font-semibold text-gray-700">ì´ë²ˆ ë‹¬ ìƒì„¸ ë‚´ì—­</h3>
        {% if attendance_list %}
            {% for item in attendance_list %}
            <div class="bg-white rounded-lg shadow-sm p-4 flex justify-between items-center border-l-4 {% if item.status == 'present' %}border-green-500{% else %}border-yellow-500{% endif %}">
                <div>
                    <p class="font-bold text-gray-800">{{ item.date }}</p>
                    <p class="text-xs text-gray-400">{{ item.timestamp.strftime('%H:%M:%S') if item.timestamp else '' }}</p>
                </div>
                <div class="text-right">
                    {% if item.status == 'present' %}
                        <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">ì¶œì„ (+{{ item.point }})</span>
                    {% else %}
                        <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">ì§€ê° (+{{ item.point }})</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="text-center text-gray-400 py-8">
                ì•„ì§ ì¶œì„ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
